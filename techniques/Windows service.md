# Windows service
### Origin of the technique
Windows has Services as a feature, but they can also be used to gain persistence.

### How to achieve persistence
You can use the `sc.exe` utility to create a new service.

Windows service settings are stored in the registry under `HKLM\System\CurrentControlSet\Services`
You can set the value of `Start` to `2` to start on boot.
Another option is to add the service to one of the following keys:

- `HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunServicesOnce`
- `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\RunServicesOnce`
- `HKEY_LOCAL_MACHINE\Software\Microsoft\Windows\CurrentVersion\RunServices`
- `HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\RunServices`

### Requirements
System privileges are required.

### The achieved persistence
When the service is set to automatic, it is started at boot and executed every interval. The spawned process has system rights.

### More information
- https://gtworek.github.io/PSBits/services.html
- https://cocomelonc.github.io/tutorial/2022/05/09/malware-pers-4.html
- https://attack.mitre.org/techniques/T1543/003/


